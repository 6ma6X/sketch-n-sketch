<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Editor</title>
  <style type="text/css" media="screen">
    body {
        overflow: hidden;
    }

    #editor {
        margin: 0;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
    }
  </style>
</head>
<body>

<pre id="editor">PLACEHOLDER</pre>

<script src="../ace-builds/src/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="../src/Native/tooltip.js" type="text/javascript" charset="utf-8"></script>
<script src="../src/Native/annot.js"   type="text/javascript" charset="utf-8"></script>

<script src="src/littleProgram.js"     type="text/javascript" charset="utf-8"></script>
<script src="src/deuceDragDrop.js"     type="text/javascript" charset="utf-8"></script>

<script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/chrome");
    editor.getSession().setMode("ace/mode/little");

    // See Ace API Reference: http://ace.c9.io/#nav=api

    // JavaScript console said to add this:
    editor.$blockScrolling = Infinity;

    ////////////////////////////////////////////////////////////

    editor.on("click", makeHandler("click"));

    // editor.on("mouseup", makeHandler("mouseup"));

    // NOTE: mousedown happens before cursor is changed...
    // editor.on("mousedown", makeHandler("mousedown"));

    displayProgram();


    ////////////////////////////////////////////////////////////

/*
    var start1 = { row: 0, column: 2 };
    var end1   = { row: 0, column: 5 };
    var range1 = { start: start1, end: end1 };

    var start2 = { row: 1, column: 2 };
    var end2   = { row: 1, column: 5 };
    var range2 = { start: start2, end: end2 };

    // Demo 2: Highlight a Range of text in yellow
    // A Marker = Range + CSS

    var Range = require("ace/range").Range, markerId
    var colorA = 'ace_highlight-marker';
    var colorB = 'ace_highlight-marker';
    // var colorA = b_down ? 'ravi-blue' : 'ace_highlight-marker';
    // var colorB = a_down ? 'ravi-blue' : 'ace_highlight-marker';
    editor.session.addMarker
      ( new Range(start1.row, start1.column, end1.row, end1.column)
      , colorA
      );
    editor.session.addMarker
      ( new Range(start2.row, start2.column, end2.row, end2.column)
      , colorB
      );
*/

    // Demo: Replace a Range of text with some other string

    // editor.getSession().getDocument().replace(range, "THIS");

    ////////////////////////////////////////////////////////////

    // Demo 3: onclick Handler. Try clicking THIS/this repeatedly.
    //
    // Based originally from:
    // https://github.com/ajaxorg/ace/issues/646

/*
    var trigger = { row: start1.row, column: 1 + start1.column };

    var handler = function(e){
        var editor = e.editor;
        // console.log(e)

        var pos = editor.getCursorPosition();
        console.log(pos);
        if (betweenPos(start1, pos, end1)) {
          var s0 = editor.getSession().getDocument().getTextRange(range1);
          var s1 = (s0 == "def") ? "let" : "def";
          editor.getSession().getDocument().replace(range1, s1);
        }

        // var token = editor.session.getTokenAt(pos.row, pos.column)
        // if (/\bkeyword\b/.test(token.type))
        //     console.log(token.value, 'is a keyword')

        // // add highlight for the clicked token
        // var range = new Range(pos.row, token.start,
        //     pos.row, token.start + token.value.length)
        // console.log(range)
        // editor.session.removeMarker(markerId)
        // markerId = editor.session.addMarker(range, 'ace_bracket red')
    }
    editor.on("click", handler)
*/

</script>

</body>
</html>
